<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Parrock Rock'n Parrilla</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <div class="admin-sidebar">
            <div class="sidebar-header">
                <h2>üé∏ Parrock Admin</h2>
                <p>Painel de Controle</p>
            </div>
            
            <div class="sidebar-nav">
                <a href="#" class="nav-item active" data-tab="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-tab="shows">
                    <span class="nav-icon">üéµ</span>
                    <span class="nav-text">Shows</span>
                </a>
                <a href="#" class="nav-item" data-tab="menu">
                    <span class="nav-icon">üçΩÔ∏è</span>
                    <span class="nav-text">Card√°pio</span>
                </a>
                <a href="#" class="nav-item" data-tab="promotions">
                    <span class="nav-icon">üéØ</span>
                    <span class="nav-text">Promo√ß√µes</span>
                </a>
                <a href="#" class="nav-item" data-tab="images">
                    <span class="nav-icon">üñºÔ∏è</span>
                    <span class="nav-text">Imagens</span>
                </a>
                <a href="#" class="nav-item" data-tab="content">
                    <span class="nav-icon">üìù</span>
                    <span class="nav-text">Conte√∫do</span>
                </a>
                <a href="#" class="nav-item" data-tab="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Configura√ß√µes</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <a href="index.html" class="btn-back">üè† Voltar ao Site</a>
                <button class="btn-logout" onclick="logout()">üö™ Sair</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="admin-main">
            <div class="admin-header">
                <h1>Painel Administrativo</h1>
                <p>Gerencie todo o conte√∫do do site Parrock Rock'n Parrilla</p>
            </div>

            <div class="admin-content">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üéµ</div>
                            <div class="stat-info">
                                <h3 id="totalShows">0</h3>
                                <p>Shows Cadastrados</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üçΩÔ∏è</div>
                            <div class="stat-info">
                                <h3 id="totalMenuItems">0</h3>
                                <p>Itens do Card√°pio</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-info">
                                <h3 id="totalPromotions">0</h3>
                                <p>Promo√ß√µes Ativas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üñºÔ∏è</div>
                            <div class="stat-info">
                                <h3 id="totalImages">0</h3>
                                <p>Imagens Cadastradas</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-welcome">
                        <h2>Bem-vindo ao Painel Administrativo!</h2>
                        <p>Use o menu lateral para navegar entre as diferentes se√ß√µes e gerenciar o conte√∫do do seu site.</p>
                    </div>
                </div>

                <!-- Shows Tab -->
                <div id="shows" class="tab-content">
                    <div class="tab-header">
                        <h3>üéµ Gerenciar Shows</h3>
                        <div class="view-toggle">
                            <button class="toggle-btn active" data-view="form">üìù Formul√°rio</button>
                            <button class="toggle-btn" data-view="preview">üëÅÔ∏è Preview</button>
                        </div>
                    </div>
                    
                    <div class="content-wrapper">
                        <div class="form-section" id="shows-form">
                            <h4>Adicionar Novo Show</h4>
                            <form id="showForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="showTitle">T√≠tulo do Show:</label>
                                    <input type="text" id="showTitle" required>
                                </div>
                                <div class="form-group">
                                    <label for="showDate">Data do Show:</label>
                                    <input type="date" id="showDate" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="showTime">Hor√°rio:</label>
                                    <input type="time" id="showTime" required>
                                </div>
                                <div class="form-group">
                                    <label for="showImage">Imagem do Show:</label>
                                    <div class="file-upload" onclick="document.getElementById('showImage').click()">
                                        <input type="file" id="showImage" accept="image/*" style="display: none;">
                                        üì∑ Escolher Imagem
                                    </div>
                                    <img id="showImagePreview" class="image-preview" style="display: none;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="showDescription">Descri√ß√£o:</label>
                                <textarea id="showDescription" required></textarea>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="showFeatured">
                                <label for="showFeatured">Mostrar no carrossel da p√°gina principal</label>
                            </div>
                            <button type="submit" class="btn btn-success">‚ú® Adicionar Show</button>
                        </form>
                    </div>

                    <div class="preview-section" id="shows-preview" style="display: none;">
                        <h4>Preview dos Shows</h4>
                        <div class="preview-container">
                            <div class="preview-site">
                                <div class="preview-header">
                                    <h2>üé∏ Parrock Rock'n Parrilla</h2>
                                    <p>Agenda de Shows</p>
                                </div>
                                <div class="preview-shows" id="previewShowsList">
                                    <!-- Preview dos shows ser√° renderizado aqui -->
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <div class="content-list" id="showsList">
                        <!-- Shows ser√£o listados aqui -->
                    </div>
                </div>

                <!-- Menu Tab -->
                <div id="menu" class="tab-content">
                    <div class="tab-header">
                        <h3>üçΩÔ∏è Gerenciar Card√°pio</h3>
                        <div class="view-toggle">
                            <button class="toggle-btn active" data-view="form">üìù Formul√°rio</button>
                            <button class="toggle-btn" data-view="preview">üëÅÔ∏è Preview</button>
                        </div>
                    </div>
                    
                    <div class="content-wrapper">
                        <div class="form-section" id="menu-form">
                            <h4>Adicionar Item ao Card√°pio</h4>
                            <form id="menuForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="menuName">Nome do Item:</label>
                                    <input type="text" id="menuName" required>
                                </div>
                                <div class="form-group">
                                    <label for="menuCategory">Categoria:</label>
                                    <select id="menuCategory" required>
                                        <option value="">Selecione uma categoria</option>
                                        <option value="entradas">Entradas</option>
                                        <option value="menu-executivo">Menu Executivo</option>
                                        <option value="carnes">Carnes</option>
                                        <option value="acompanhamentos">Acompanhamentos</option>
                                        <option value="porcoes">Por√ß√µes</option>
                                        <option value="burguers">Burguers</option>
                                        <option value="sobremesas">Sobremesas</option>
                                        <option value="chopp-370ml">Chopp 370ml</option>
                                        <option value="cervejas-long-neck">Cervejas Long Neck</option>
                                        <option value="cervejas-600ml">Cervejas 600ml</option>
                                        <option value="bebidas">Bebidas</option>
                                        <option value="drinks">Drinks</option>
                                        <option value="drinks-autorais">Drinks Autorais</option>
                                        <option value="doses">Doses</option>
                                        <option value="vinhos">Vinhos</option>
                                        <option value="convite">Convite</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="menuPrice">Pre√ßo (R$):</label>
                                    <input type="number" id="menuPrice" step="0.01" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="menuImage">Imagem do Item:</label>
                                    <div class="file-upload" onclick="document.getElementById('menuImage').click()">
                                        <input type="file" id="menuImage" accept="image/*" style="display: none;">
                                        üì∑ Escolher Imagem
                                    </div>
                                    <img id="menuImagePreview" class="image-preview" style="display: none;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="menuDescription">Descri√ß√£o:</label>
                                <textarea id="menuDescription" required></textarea>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="menuFeatured">
                                <label for="menuFeatured">Item em destaque</label>
                            </div>
                            <button type="submit" class="btn btn-success">‚ú® Adicionar Item</button>
                        </form>
                    </div>

                    <div class="preview-section" id="menu-preview" style="display: none;">
                        <h4>Preview do Card√°pio</h4>
                        <div class="preview-container">
                            <div class="preview-site">
                                <div class="preview-header">
                                    <h2>üçΩÔ∏è Card√°pio Parrock</h2>
                                    <p>Nossos pratos e bebidas</p>
                                </div>
                                <div class="preview-menu" id="previewMenuList">
                                    <!-- Preview do card√°pio ser√° renderizado aqui -->
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <div class="content-list" id="menuList">
                        <!-- Itens do card√°pio ser√£o listados aqui -->
                    </div>
                </div>

                <!-- Promotions Tab -->
                <div id="promotions" class="tab-content">
                    <div class="tab-header">
                        <h3>üéØ Gerenciar Promo√ß√µes</h3>
                        <div class="view-toggle">
                            <button class="toggle-btn active" data-view="form">üìù Formul√°rio</button>
                            <button class="toggle-btn" data-view="preview">üëÅÔ∏è Preview</button>
                        </div>
                    </div>
                    
                    <div class="content-wrapper">
                        <div class="form-section" id="promotions-form">
                            <h4>Criar Nova Promo√ß√£o</h4>
                            <form id="promotionForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="promotionTitle">T√≠tulo da Promo√ß√£o:</label>
                                    <input type="text" id="promotionTitle" required>
                                </div>
                                <div class="form-group">
                                    <label for="promotionValidUntil">V√°lido at√©:</label>
                                    <input type="date" id="promotionValidUntil" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="promotionImage">Imagem da Promo√ß√£o:</label>
                                <div class="file-upload" onclick="document.getElementById('promotionImage').click()">
                                    <input type="file" id="promotionImage" accept="image/*" style="display: none;">
                                    üì∑ Escolher Imagem
                                </div>
                                <img id="promotionImagePreview" class="image-preview" style="display: none;">
                            </div>
                            <div class="form-group">
                                <label for="promotionDescription">Descri√ß√£o:</label>
                                <textarea id="promotionDescription" required></textarea>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="promotionFeatured">
                                <label for="promotionFeatured">Mostrar no carrossel da p√°gina principal</label>
                            </div>
                            <button type="submit" class="btn btn-success">‚ú® Criar Promo√ß√£o</button>
                        </form>
                    </div>

                    <div class="preview-section" id="promotions-preview" style="display: none;">
                        <h4>Preview das Promo√ß√µes</h4>
                        <div class="preview-container">
                            <div class="preview-site">
                                <div class="preview-header">
                                    <h2>üéØ Promo√ß√µes da Semana</h2>
                                    <p>Ofertas especiais do Parrock</p>
                                </div>
                                <div class="preview-promotions" id="previewPromotionsList">
                                    <!-- Preview das promo√ß√µes ser√° renderizado aqui -->
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <div class="content-list" id="promotionsList">
                        <!-- Promo√ß√µes ser√£o listadas aqui -->
                    </div>
                </div>

                <!-- Images Tab -->
                <div id="images" class="tab-content">
                    <div class="tab-header">
                        <h3>üñºÔ∏è Gerenciar Imagens</h3>
                    </div>
                    
                    <div class="content-wrapper">

                        <div class="preview-section" id="images-preview">
                        <h4>Preview das Imagens</h4>
                        <div class="preview-container">
                            <div class="preview-site">
                                <div class="preview-header">
                                    <h2>üñºÔ∏è Galeria de Imagens</h2>
                                    <p>Imagens organizadas por categoria</p>
                                </div>
                                <div class="preview-images" id="previewImagesList">
                                    <!-- Preview das imagens ser√° renderizado aqui -->
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <div class="content-list" id="imagesList">
                        <!-- Imagens ser√£o listadas aqui -->
                    </div>
                </div>

                <!-- Content Tab -->
                <div id="content" class="tab-content">
                    <div class="tab-header">
                        <h3>üìù Gerenciar Conte√∫do</h3>
                    </div>
                    
                    <div class="content-wrapper">

                    <div class="preview-section" id="content-preview">
                        <h4>Preview do Conte√∫do</h4>
                        <div class="preview-container">
                            <div class="preview-site">
                                <div class="preview-header">
                                    <h2>üìù Conte√∫do do Site</h2>
                                    <p>Se√ß√µes e textos do Parrock</p>
                                </div>
                                <div class="preview-content" id="previewContentList">
                                    <!-- Preview do conte√∫do ser√° renderizado aqui -->
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <div class="content-list" id="contentList">
                        <!-- Conte√∫dos ser√£o listados aqui -->
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <div class="form-section">
                        <h3>‚öôÔ∏è Configura√ß√µes do Site</h3>
                        <form id="settingsForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="siteTitle">T√≠tulo do Site:</label>
                                    <input type="text" id="siteTitle" value="Parrock Rock'n Parrilla">
                                </div>
                                <div class="form-group">
                                    <label for="siteLogo">Logo do Site:</label>
                                    <div class="file-upload" onclick="document.getElementById('siteLogo').click()">
                                        <input type="file" id="siteLogo" accept="image/*" style="display: none;">
                                        üì∑ Escolher Logo
                                    </div>
                                    <img id="siteLogoPreview" class="image-preview" style="display: none;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="siteDescription">Descri√ß√£o do Site:</label>
                                <textarea id="siteDescription">O melhor rock'n roll com a melhor parrilla da cidade!</textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="primaryColor">Cor Prim√°ria:</label>
                                    <input type="color" id="primaryColor" value="#d4af37">
                                </div>
                                <div class="form-group">
                                    <label for="secondaryColor">Cor Secund√°ria:</label>
                                    <input type="color" id="secondaryColor" value="#1a1a1a">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-success">‚ú® Salvar Configura√ß√µes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para substituir imagem -->
    <div id="imageModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîÑ Substituir Imagem</h3>
                <span class="close" onclick="closeImageModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="imageModalForm">
                    <div class="form-group">
                        <label for="modalImageName">Nome da Imagem:</label>
                        <input type="text" id="modalImageName" readonly>
                    </div>
                    <div class="form-group">
                        <label for="modalImageFile">Nova Imagem:</label>
                        <div class="file-upload" onclick="document.getElementById('modalImageFile').click()">
                            <input type="file" id="modalImageFile" accept="image/*" required style="display: none;">
                            üì∑ Escolher Nova Imagem
                        </div>
                        <img id="modalImagePreview" class="image-preview" style="display: none;">
                    </div>
                    <div class="form-group">
                        <label for="modalImageDescription">Descri√ß√£o:</label>
                        <textarea id="modalImageDescription"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-success">‚ú® Substituir Imagem</button>
                        <button type="button" class="btn btn-secondary" onclick="closeImageModal()">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para editar conte√∫do -->
    <div id="contentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Editar Conte√∫do</h3>
                <span class="close" onclick="closeContentModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="contentModalForm">
                    <div class="form-group">
                        <label for="modalContentSection">Se√ß√£o:</label>
                        <input type="text" id="modalContentSection" readonly>
                    </div>
                    <div class="form-group">
                        <label for="modalContentTitle">T√≠tulo:</label>
                        <input type="text" id="modalContentTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="modalContentText">Texto:</label>
                        <textarea id="modalContentText" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="modalContentImage">Imagem (opcional):</label>
                        <div class="file-upload" onclick="document.getElementById('modalContentImage').click()">
                            <input type="file" id="modalContentImage" accept="image/*" style="display: none;">
                            üì∑ Escolher Imagem
                        </div>
                        <img id="modalContentImagePreview" class="image-preview" style="display: none;">
                    </div>
                    
                    <!-- Campos espec√≠ficos para contato -->
                    <div id="modalContactFields" style="display: none;">
                        <h4 style="color: #d4af37; margin: 1rem 0;">üìû Dados de Contato</h4>
                        <div class="form-group">
                            <label for="modalContactAddress">Endere√ßo:</label>
                            <textarea id="modalContactAddress"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="modalContactPhone">Telefone:</label>
                            <input type="text" id="modalContactPhone">
                        </div>
                        <div class="form-group">
                            <label for="modalContactEmail">E-mail:</label>
                            <input type="email" id="modalContactEmail">
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-success">‚ú® Salvar Conte√∫do</button>
                        <button type="button" class="btn btn-secondary" onclick="closeContentModal()">‚ùå Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de confirma√ß√£o de exclus√£o -->
    <div id="confirmModal" class="modal" style="display: none;">
        <div class="modal-content confirm-modal">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Confirmar Exclus√£o</h3>
                <span class="close" onclick="closeConfirmModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="confirm-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <p id="confirmMessage">Tem certeza que deseja excluir este item?</p>
                <p class="confirm-warning">Esta a√ß√£o n√£o pode ser desfeita.</p>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeConfirmModal()">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button type="button" class="btn btn-danger" onclick="executeDelete()">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Sistema de navega√ß√£o por abas
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Remove active de todos os itens
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Adiciona active no item clicado
                item.classList.add('active');
                const tabId = item.dataset.tab;
                document.getElementById(tabId).classList.add('active');
                
                // Atualiza preview quando muda de aba
                updateAllPreviews();
            });
        });

        // Sistema de toggle entre formul√°rio e preview
        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const view = e.target.dataset.view;
                const tabContent = e.target.closest('.tab-content');
                const formSection = tabContent.querySelector('.form-section');
                const previewSection = tabContent.querySelector('.preview-section');
                const toggleBtns = tabContent.querySelectorAll('.toggle-btn');
                
                // Remove active de todos os bot√µes
                toggleBtns.forEach(b => b.classList.remove('active'));
                // Adiciona active no bot√£o clicado
                e.target.classList.add('active');
                
                if (view === 'form') {
                    formSection.style.display = 'block';
                    previewSection.style.display = 'none';
                } else {
                    formSection.style.display = 'none';
                    previewSection.style.display = 'block';
                    updateAllPreviews();
                }
            });
        });

        // Preview de imagens - vers√£o ultra simplificada
        function setupImagePreview(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            
            if (input && preview) {
                input.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file && file.type.startsWith('image/')) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            preview.src = e.target.result;
                            preview.style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        }

        // Configurar previews
        setupImagePreview('showImage', 'showImagePreview');
        setupImagePreview('menuImage', 'menuImagePreview');
        setupImagePreview('promotionImage', 'promotionImagePreview');
        setupImagePreview('imageFile', 'imageFilePreview');
        setupImagePreview('contentImage', 'contentImagePreview');
        setupImagePreview('siteLogo', 'siteLogoPreview');

        // Atualizar estat√≠sticas
        function updateStats() {
            const shows = JSON.parse(localStorage.getItem('shows') || '[]');
            const menuItems = JSON.parse(localStorage.getItem('menuItems') || '[]');
            const promotions = JSON.parse(localStorage.getItem('promotions') || '[]');
            const images = JSON.parse(localStorage.getItem('images') || '[]');

            document.getElementById('totalShows').textContent = shows.length;
            document.getElementById('totalMenuItems').textContent = menuItems.length;
            document.getElementById('totalPromotions').textContent = promotions.length;
            document.getElementById('totalImages').textContent = images.length;
        }

        // Carregar dados existentes
        function loadExistingData() {
            updateStats();
            loadShows();
            loadMenuItems();
            loadPromotions();
            loadImages();
            loadContent();
        }

        // Fun√ß√µes de carregamento (ser√£o implementadas pelo EnhancedAdminManager)
        function loadShows() {
            // Implementado pelo EnhancedAdminManager
        }

        function loadMenuItems() {
            // Implementado pelo EnhancedAdminManager
        }

        function loadPromotions() {
            // Implementado pelo EnhancedAdminManager
        }

        function loadImages() {
            // Implementado pelo EnhancedAdminManager
        }

        function loadContent() {
            // Implementado pelo EnhancedAdminManager
        }

        // Fun√ß√£o de logout
        function logout() {
            if (confirm('Tem certeza que deseja sair do painel administrativo?')) {
                localStorage.removeItem('adminMode');
                window.location.href = 'index.html';
            }
        }

        // Fun√ß√µes de Preview
        function updateAllPreviews() {
            updateShowsPreview();
            updateMenuPreview();
            updatePromotionsPreview();
            updateImagesPreview();
            updateContentPreview();
        }

        function updateShowsPreview() {
            const shows = JSON.parse(localStorage.getItem('shows') || '[]');
            const previewContainer = document.getElementById('previewShowsList');
            
            if (!previewContainer) return;
            
            if (shows.length === 0) {
                previewContainer.innerHTML = `
                    <div class="preview-empty">
                        <div class="icon">üéµ</div>
                        <p>Nenhum show cadastrado ainda.</p>
                        <p>Adicione shows usando o formul√°rio ao lado.</p>
                    </div>
                `;
                return;
            }
            
            previewContainer.innerHTML = shows.map(show => `
                <div class="preview-item">
                    ${show.image ? `<img src="${show.image}" alt="${show.title}">` : ''}
                    <h5>${show.title}</h5>
                    <p>${show.description}</p>
                    <div class="preview-meta">
                        <span>üìÖ ${formatDate(show.date)}</span>
                        <span>üïê ${show.time}</span>
                        ${show.featured ? '<span class="featured">‚≠ê Destaque</span>' : ''}
                    </div>
                    <div class="preview-item-actions">
                        <button class="btn btn-warning btn-sm" onclick="editShow('${show.id || show.title}')">
                            ‚úèÔ∏è Editar
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteShow('${show.id || show.title}')">
                            üóëÔ∏è Excluir
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function updateMenuPreview() {
            const menuItems = JSON.parse(localStorage.getItem('menuItems') || '[]');
            const previewContainer = document.getElementById('previewMenuList');
            
            if (!previewContainer) return;
            
            if (menuItems.length === 0) {
                previewContainer.innerHTML = `
                    <div class="preview-empty">
                        <div class="icon">üçΩÔ∏è</div>
                        <p>Nenhum item no card√°pio ainda.</p>
                        <p>Adicione itens usando o formul√°rio ao lado.</p>
                    </div>
                `;
                return;
            }
            
            // Agrupar por categoria
            const groupedItems = menuItems.reduce((acc, item) => {
                if (!acc[item.category]) {
                    acc[item.category] = [];
                }
                acc[item.category].push(item);
                return acc;
            }, {});
            
            previewContainer.innerHTML = Object.entries(groupedItems).map(([category, items]) => `
                <div class="preview-category">
                    <h6 style="color: #d4af37; font-size: 1.1rem; margin-bottom: 1rem; text-transform: capitalize; border-bottom: 1px solid #e9ecef; padding-bottom: 0.5rem;">
                        ${category.replace('-', ' ')}
                    </h6>
                    ${items.map(item => `
                        <div class="preview-item">
                            ${item.image ? `<img src="${item.image}" alt="${item.name}">` : ''}
                            <h5>${item.name}</h5>
                            <p>${item.description}</p>
                            <div class="preview-meta">
                                <span>üí∞ R$ ${item.price.toFixed(2)}</span>
                                ${item.featured ? '<span class="featured">‚≠ê Destaque</span>' : ''}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }

        function updatePromotionsPreview() {
            const promotions = JSON.parse(localStorage.getItem('promotions') || '[]');
            const previewContainer = document.getElementById('previewPromotionsList');
            
            if (!previewContainer) return;
            
            if (promotions.length === 0) {
                previewContainer.innerHTML = `
                    <div class="preview-empty">
                        <div class="icon">üéØ</div>
                        <p>Nenhuma promo√ß√£o cadastrada ainda.</p>
                        <p>Crie promo√ß√µes usando o formul√°rio ao lado.</p>
                    </div>
                `;
                return;
            }
            
            previewContainer.innerHTML = promotions.map(promotion => `
                <div class="preview-item">
                    ${promotion.image ? `<img src="${promotion.image}" alt="${promotion.title}">` : ''}
                    <h5>${promotion.title}</h5>
                    <p>${promotion.description}</p>
                    <div class="preview-meta">
                        <span>üìÖ V√°lido at√©: ${formatDate(promotion.validUntil)}</span>
                        ${promotion.featured ? '<span class="featured">‚≠ê Destaque</span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function updateImagesPreview() {
            const previewContainer = document.getElementById('previewImagesList');
            
            if (!previewContainer) return;
            
            // Imagens atuais do site (extra√≠das do index.html)
            const currentImages = {
                'logo': [
                    { name: 'Logo Principal', path: 'imagens/profile_parrocknparrilla.webp', description: 'Logo do Parrock Rock\'n Parrilla' }
                ],
                'hero': [
                    { name: 'Logo Hero', path: 'imagens/profile_parrocknparrilla.webp', description: 'Logo principal na se√ß√£o hero' }
                ],
                'about': [
                    { name: '√Årea Externa', path: 'imagens/Area-externo-parrock.webp', description: 'Ambiente externo do Parrock' }
                ],
                'gallery': [
                    { name: '√Årea Externa 1', path: 'imagens/Area-externo-parrock.webp', description: '√Årea externa do Parrock' },
                    { name: '√Årea Externa 2', path: 'imagens/Area-externo-parrock-2.webp', description: '√Årea externa do Parrock - Vista 2' },
                    { name: '√Årea Externa 3', path: 'imagens/area-externa.webp', description: '√Årea externa do Parrock' },
                    { name: '√Årea da Parrilla', path: 'imagens/area-parrilla.webp', description: '√Årea interna da parrilla' }
                ]
            };
            
            // Imagens adicionadas pelo admin
            const uploadedImages = JSON.parse(localStorage.getItem('images') || '[]');
            
            // Mesclar imagens atuais com as adicionadas
            const allImages = { ...currentImages };
            uploadedImages.forEach(image => {
                if (!allImages[image.category]) {
                    allImages[image.category] = [];
                }
                allImages[image.category].push({
                    id: image.id || image.name,
                    name: image.name,
                    path: image.data,
                    description: image.description,
                    isUploaded: true
                });
            });
            
            // Verificar se h√° imagens para mostrar
            const hasImages = Object.values(allImages).some(category => category.length > 0);
            
            if (!hasImages) {
                previewContainer.innerHTML = `
                    <div class="preview-empty">
                        <div class="icon">üñºÔ∏è</div>
                        <p>Nenhuma imagem dispon√≠vel.</p>
                        <p>Fa√ßa upload de imagens usando o formul√°rio ao lado.</p>
                    </div>
                `;
                return;
            }
            
            previewContainer.innerHTML = Object.entries(allImages).map(([category, categoryImages]) => {
                if (categoryImages.length === 0) return '';
                
                return `
                    <div class="preview-category">
                        <h6 style="color: #d4af37; font-size: 1.1rem; margin-bottom: 1rem; text-transform: capitalize; border-bottom: 1px solid #e9ecef; padding-bottom: 0.5rem;">
                            ${category.replace('-', ' ')}
                        </h6>
                        <div class="preview-images-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem;">
                            ${categoryImages.map(image => `
                                <div class="preview-image-item" style="text-align: center;">
                                    <img src="${image.path}" alt="${image.name}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 0.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" onerror="this.style.display='none'">
                                    <h6 style="font-size: 0.9rem; margin: 0; color: #333;">${image.name}</h6>
                                    ${image.description ? `<p style="font-size: 0.8rem; color: #666; margin: 0.25rem 0 0 0;">${image.description}</p>` : ''}
                                    ${image.isUploaded ? '<span style="font-size: 0.7rem; color: #28a745; font-weight: 600;">üì§ Upload</span>' : '<span style="font-size: 0.7rem; color: #6c757d; font-weight: 600;">üìÑ Padr√£o</span>'}
                                       <div class="item-actions" style="margin-top: 0.5rem;">
                                           <button class="btn btn-warning replace-image-btn" data-image-path="${image.path}" data-image-name="${image.name}" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">üîÑ Substituir</button>
                                       </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).filter(html => html).join('');
        }

        function updateContentPreview() {
            const previewContainer = document.getElementById('previewContentList');
            
            if (!previewContainer) return;
            
            // Conte√∫do atual das se√ß√µes do site (extra√≠do do index.html)
            const currentContent = {
                'hero': {
                    title: 'O ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla',
                    text: 'Desde de 2019 entregando experi√™ncias √∫nicas',
                    image: 'imagens/profile_parrocknparrilla.webp'
                },
                'about': {
                    title: 'Sobre o Parrock',
                    text: 'Desde 2019, o Parrock Rock\'n Parrilla tem sido o ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla em Campo Grande/MS. Com uma atmosfera √∫nica, oferecemos uma experi√™ncia completa para eventos sociais e corporativos, anivers√°rios, coquet√©is, casamentos, confraterniza√ß√µes e muito mais.\n\nVenha se juntar a n√≥s e aproveite momentos memor√°veis no Parrock Rock\'n Parrilla!',
                    image: 'imagens/Area-externo-parrock.webp'
                },
                'services': {
                    title: 'Nossos Servi√ßos',
                    text: 'Experi√™ncias completas para todas as ocasi√µes:\n\n‚Ä¢ Eventos Corporativos - Espa√ßo ideal para reuni√µes, treinamentos e confraterniza√ß√µes empresariais\n‚Ä¢ Anivers√°rios - Celebre em um ambiente especial com m√∫sica rock e gastronomia de qualidade\n‚Ä¢ Coquet√©is - Eventos sociais elegantes com drinks especiais e ambiente sofisticado\n‚Ä¢ Casamentos - Celebre o dia mais especial da sua vida em um ambiente √∫nico\n‚Ä¢ Confraterniza√ß√µes - Re√∫na amigos e familiares para momentos especiais\n‚Ä¢ Experi√™ncia Gastron√¥mica - Desfrute da aut√™ntica cultura da parrilla com carnes selecionadas',
                    image: null
                },
                'contact': {
                    title: 'Entre em Contato',
                    text: 'Reserve sua mesa ou solicite um or√ßamento\n\nüìç Endere√ßo: Rua Euclides da Cunha, 423 - Centro, Campo Grande/MS\nüìû Telefone: (67) 99999-9999\nüìß E-mail: contato@parrock.com.br\n\nRedes Sociais: Instagram e WhatsApp dispon√≠veis',
                    image: null
                }
            };
            
            // Conte√∫do personalizado do localStorage
            const customContent = JSON.parse(localStorage.getItem('siteContent') || '[]');
            
            // Mesclar conte√∫do atual com personalizado
            const mergedContent = { ...currentContent };
            customContent.forEach(item => {
                if (mergedContent[item.section]) {
                    mergedContent[item.section] = {
                        ...mergedContent[item.section],
                        title: item.title,
                        text: item.text,
                        image: item.image || mergedContent[item.section].image
                    };
                }
            });
            
            previewContainer.innerHTML = Object.entries(mergedContent).map(([section, content]) => `
                <div class="preview-item">
                    ${content.image ? `<img src="${content.image}" alt="${content.title}" onerror="this.style.display='none'">` : ''}
                    <h5>${section.replace('-', ' ').toUpperCase()}</h5>
                    <h6 style="color: #d4af37; font-size: 1.2rem; margin-bottom: 0.5rem;">${content.title}</h6>
                    <p style="line-height: 1.6; color: #333;">${content.text}</p>
                    <div class="preview-meta">
                        <span>üìù Se√ß√£o: ${section}</span>
                        <span>${customContent.find(item => item.section === section) ? '‚úèÔ∏è Personalizado' : 'üìÑ Padr√£o'}</span>
                    </div>
                       <div class="item-actions" style="margin-top: 1rem;">
                           <button class="btn btn-secondary edit-content-btn" data-section="${section}" style="padding: 0.5rem 1rem; font-size: 0.9rem;">‚úèÔ∏è Editar</button>
                       </div>
                </div>
            `).join('');
        }

        // Fun√ß√µes para gerenciar conte√∫do das se√ß√µes
        function editContentSection(section) {
            console.log(`üîß Executando editContentSection para: ${section}`);
            const customContent = JSON.parse(localStorage.getItem('siteContent') || '[]');
            const existingContent = customContent.find(item => item.section === section);
            console.log(`üìã Conte√∫do personalizado encontrado:`, existingContent);
            
            // Conte√∫do atual das se√ß√µes do site (extra√≠do do index.html)
            const currentContent = {
                'hero': {
                    title: 'O ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla',
                    text: 'Desde de 2019 entregando experi√™ncias √∫nicas',
                    image: 'imagens/profile_parrocknparrilla.webp'
                },
                'about': {
                    title: 'Sobre o Parrock',
                    text: 'Desde 2019, o Parrock Rock\'n Parrilla tem sido o ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla em Campo Grande/MS. Com uma atmosfera √∫nica, oferecemos uma experi√™ncia completa para eventos sociais e corporativos, anivers√°rios, coquet√©is, casamentos, confraterniza√ß√µes e muito mais.\n\nVenha se juntar a n√≥s e aproveite momentos memor√°veis no Parrock Rock\'n Parrilla!',
                    image: 'imagens/Area-externo-parrock.webp'
                },
                'services': {
                    title: 'Nossos Servi√ßos',
                    text: 'Experi√™ncias completas para todas as ocasi√µes:\n\n‚Ä¢ Eventos Corporativos - Espa√ßo ideal para reuni√µes, treinamentos e confraterniza√ß√µes empresariais\n‚Ä¢ Anivers√°rios - Celebre em um ambiente especial com m√∫sica rock e gastronomia de qualidade\n‚Ä¢ Coquet√©is - Eventos sociais elegantes com drinks especiais e ambiente sofisticado\n‚Ä¢ Casamentos - Celebre o dia mais especial da sua vida em um ambiente √∫nico\n‚Ä¢ Confraterniza√ß√µes - Re√∫na amigos e familiares para momentos especiais\n‚Ä¢ Experi√™ncia Gastron√¥mica - Desfrute da aut√™ntica cultura da parrilla com carnes selecionadas',
                    image: null
                },
                'contact': {
                    title: 'Entre em Contato',
                    text: 'Reserve sua mesa ou solicite um or√ßamento\n\nüìç Endere√ßo: Rua Euclides da Cunha, 423 - Centro, Campo Grande/MS\nüìû Telefone: (67) 99999-9999\nüìß E-mail: contato@parrock.com.br\n\nRedes Sociais: Instagram e WhatsApp dispon√≠veis',
                    image: null
                }
            };
            
            // Mesclar conte√∫do padr√£o com personalizado
            let contentToEdit = currentContent[section];
            if (existingContent) {
                contentToEdit = {
                    ...contentToEdit,
                    title: existingContent.title || contentToEdit.title,
                    text: existingContent.text || contentToEdit.text,
                    image: existingContent.image || contentToEdit.image,
                    contactData: existingContent.contactData || contentToEdit.contactData
                };
            }
            console.log(`üìù Conte√∫do a editar:`, contentToEdit);
            
            if (contentToEdit) {
                console.log(`üìù Preenchendo formul√°rio...`);
                // Preencher formul√°rio com dados
                const sectionSelect = document.getElementById('contentSection');
                const titleInput = document.getElementById('contentTitle');
                const textInput = document.getElementById('contentText');
                
                console.log(`üìù Elementos encontrados:`, {
                    sectionSelect: !!sectionSelect,
                    titleInput: !!titleInput,
                    textInput: !!textInput
                });
                
                if (sectionSelect) {
                    sectionSelect.value = section;
                    sectionSelect.disabled = true; // N√£o permitir mudan√ßa de se√ß√£o
                }
                if (titleInput) titleInput.value = contentToEdit.title;
                if (textInput) textInput.value = contentToEdit.text;
                
                // Preencher campos espec√≠ficos de contato se existirem
                if (section === 'contact' && contentToEdit.contactData) {
                    const contactFields = document.getElementById('contactFields');
                    if (contactFields) contactFields.style.display = 'block';
                    
                    const addressField = document.getElementById('contactAddress');
                    const phoneField = document.getElementById('contactPhone');
                    const emailField = document.getElementById('contactEmail');
                    
                    if (addressField && contentToEdit.contactData.address) {
                        addressField.value = contentToEdit.contactData.address;
                    }
                    if (phoneField && contentToEdit.contactData.phone) {
                        phoneField.value = contentToEdit.contactData.phone;
                    }
                    if (emailField && contentToEdit.contactData.email) {
                        emailField.value = contentToEdit.contactData.email;
                    }
                }
                
                if (contentToEdit.image) {
                    document.getElementById('contentImagePreview').src = contentToEdit.image;
                    document.getElementById('contentImagePreview').style.display = 'block';
                } else {
                    document.getElementById('contentImagePreview').style.display = 'none';
                }
                
                // Mudar para o formul√°rio
                switchToForm('content');
                showSuccess(existingContent ? 'Conte√∫do personalizado carregado para edi√ß√£o!' : 'Conte√∫do padr√£o carregado para edi√ß√£o!');
            }
        }

        function deleteContentSection(section) {
            if (confirm(`Tem certeza que deseja excluir o conte√∫do personalizado da se√ß√£o "${section}"?`)) {
                const customContent = JSON.parse(localStorage.getItem('siteContent') || '[]');
                const filteredContent = customContent.filter(item => item.section !== section);
                localStorage.setItem('siteContent', JSON.stringify(filteredContent));
                
                updateContentPreview();
                showSuccess('Conte√∫do personalizado exclu√≠do! Voltou ao padr√£o.');
            }
        }

        function customizeContentSection(section) {
            // Preencher formul√°rio com dados padr√£o da se√ß√£o (conte√∫do real do site)
            const currentContent = {
                'hero': {
                    title: 'O ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla',
                    text: 'Desde de 2019 entregando experi√™ncias √∫nicas',
                    image: 'imagens/profile_parrocknparrilla.webp'
                },
                'about': {
                    title: 'Sobre o Parrock',
                    text: 'Desde 2019, o Parrock Rock\'n Parrilla tem sido o ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla em Campo Grande/MS. Com uma atmosfera √∫nica, oferecemos uma experi√™ncia completa para eventos sociais e corporativos, anivers√°rios, coquet√©is, casamentos, confraterniza√ß√µes e muito mais.\n\nVenha se juntar a n√≥s e aproveite momentos memor√°veis no Parrock Rock\'n Parrilla!',
                    image: 'imagens/Area-externo-parrock.webp'
                },
                'services': {
                    title: 'Nossos Servi√ßos',
                    text: 'Experi√™ncias completas para todas as ocasi√µes:\n\n‚Ä¢ Eventos Corporativos - Espa√ßo ideal para reuni√µes, treinamentos e confraterniza√ß√µes empresariais\n‚Ä¢ Anivers√°rios - Celebre em um ambiente especial com m√∫sica rock e gastronomia de qualidade\n‚Ä¢ Coquet√©is - Eventos sociais elegantes com drinks especiais e ambiente sofisticado\n‚Ä¢ Casamentos - Celebre o dia mais especial da sua vida em um ambiente √∫nico\n‚Ä¢ Confraterniza√ß√µes - Re√∫na amigos e familiares para momentos especiais\n‚Ä¢ Experi√™ncia Gastron√¥mica - Desfrute da aut√™ntica cultura da parrilla com carnes selecionadas',
                    image: null
                },
                'contact': {
                    title: 'Entre em Contato',
                    text: 'Reserve sua mesa ou solicite um or√ßamento',
                    image: null,
                    contactData: {
                        address: 'Rua Euclides da Cunha, 423\nCentro, Campo Grande/MS',
                        phone: '(67) 99999-9999',
                        email: 'contato@parrock.com.br'
                    }
                }
            };
            
            const sectionData = currentContent[section];
            if (sectionData) {
                document.getElementById('contentSection').value = section;
                document.getElementById('contentTitle').value = sectionData.title;
                document.getElementById('contentText').value = sectionData.text;
                
                // Preencher campos espec√≠ficos de contato se existirem
                if (section === 'contact' && sectionData.contactData) {
                    const contactFields = document.getElementById('contactFields');
                    if (contactFields) contactFields.style.display = 'block';
                    
                    const addressField = document.getElementById('contactAddress');
                    const phoneField = document.getElementById('contactPhone');
                    const emailField = document.getElementById('contactEmail');
                    
                    if (addressField && sectionData.contactData.address) {
                        addressField.value = sectionData.contactData.address;
                    }
                    if (phoneField && sectionData.contactData.phone) {
                        phoneField.value = sectionData.contactData.phone;
                    }
                    if (emailField && sectionData.contactData.email) {
                        emailField.value = sectionData.contactData.email;
                    }
                }
                
                if (sectionData.image) {
                    document.getElementById('contentImagePreview').src = sectionData.image;
                    document.getElementById('contentImagePreview').style.display = 'block';
                } else {
                    document.getElementById('contentImagePreview').style.display = 'none';
                }
                
                // Mudar para o formul√°rio
                switchToForm('content');
                showSuccess('Conte√∫do padr√£o carregado para personaliza√ß√£o!');
            }
        }

        function removeContentSection(section) {
            if (confirm(`Tem certeza que deseja remover completamente a se√ß√£o "${section}"? Esta a√ß√£o n√£o pode ser desfeita.`)) {
                // Remover conte√∫do personalizado se existir
                const customContent = JSON.parse(localStorage.getItem('siteContent') || '[]');
                const filteredContent = customContent.filter(item => item.section !== section);
                localStorage.setItem('siteContent', JSON.stringify(filteredContent));
                
                updateContentPreview();
                showSuccess('Se√ß√£o removida com sucesso!');
            }
        }

        function clearContentForm() {
            document.getElementById('contentForm').reset();
            document.getElementById('contentImagePreview').style.display = 'none';
            showSuccess('Formul√°rio limpo!');
        }

        // Fun√ß√µes para gerenciar imagens
        function editImage(imageId) {
            const images = JSON.parse(localStorage.getItem('images') || '[]');
            const image = images.find(img => img.id === imageId || img.name === imageId);
            
            if (image) {
                // Preencher formul√°rio com dados da imagem
                document.getElementById('imageName').value = image.name;
                document.getElementById('imageCategory').value = image.category;
                document.getElementById('imageDescription').value = image.description || '';
                
                if (image.data) {
                    document.getElementById('imagePreview').src = image.data;
                    document.getElementById('imagePreview').style.display = 'block';
                }
                
                // Mudar para o formul√°rio
                switchToForm('images');
                showSuccess('Imagem carregada para edi√ß√£o!');
            }
        }

        function deleteImage(imageId) {
            const images = JSON.parse(localStorage.getItem('images') || '[]');
            const image = images.find(img => img.id === imageId || img.name === imageId);
            
            if (!image) {
                alert('Imagem n√£o encontrada!');
                return;
            }
            
            // Configurar a√ß√£o de exclus√£o
            pendingDeleteAction = () => {
                const filteredImages = images.filter(img => img.id !== imageId && img.name !== imageId);
                localStorage.setItem('images', JSON.stringify(filteredImages));
                
                updateImagesPreview();
                showSuccess('Imagem exclu√≠da com sucesso!');
            };
            
            pendingDeleteItem = image.name || imageId;
            
            // Mostrar modal de confirma√ß√£o
            showConfirmModal(`Tem certeza que deseja excluir a imagem "${image.name || imageId}"?`);
        }

        function viewImage(imagePath) {
            // Abrir imagem em nova aba
            window.open(imagePath, '_blank');
        }

        function replaceImage(imagePath) {
            console.log(`üîÑ Executando replaceImage para: ${imagePath}`);
            
            // Extrair nome da imagem do caminho
            const imageName = imagePath.split('/').pop().split('.')[0];
            console.log(`üìù Nome extra√≠do: ${imageName}`);
            
            // Preencher formul√°rio para substituir imagem
            const nameField = document.getElementById('imageName');
            const descriptionField = document.getElementById('imageDescription');
            
            if (nameField) {
                nameField.value = imageName;
                nameField.disabled = true; // N√£o permitir mudan√ßa de nome na substitui√ß√£o
                console.log(`‚úÖ Campo nome preenchido: ${imageName}`);
            }
            
            if (descriptionField) {
                descriptionField.value = `Imagem substitu√≠da: ${imageName}`;
                console.log(`‚úÖ Campo descri√ß√£o preenchido`);
            }
            
            // Armazenar o caminho da imagem original para refer√™ncia
            window.currentReplacingImage = imagePath;
            console.log(`üíæ Imagem original armazenada: ${imagePath}`);
            
            // Mudar para o formul√°rio
            switchToForm('images');
            showSuccess('Formul√°rio preparado para substituir a imagem! Clique em "Upload Imagem" para confirmar a substitui√ß√£o.');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }

        // Atualizar preview quando dados mudam
        function refreshPreviews() {
            updateAllPreviews();
            updateStats();
            bindPreviewButtons();
        }

        // Vincular event listeners aos bot√µes de preview usando delega√ß√£o de eventos
        function bindPreviewButtons() {
            console.log('üîó Vinculando bot√µes de preview...');
            
            // Usar delega√ß√£o de eventos no documento
            document.addEventListener('click', function(e) {
                // Bot√µes de conte√∫do
                if (e.target.classList.contains('edit-content-btn')) {
                    e.preventDefault();
                    const section = e.target.getAttribute('data-section');
                    console.log(`üìù Clicou em editar se√ß√£o: ${section}`);
                    openContentModal(section);
                }
                
                // Bot√µes de imagens
                
                if (e.target.classList.contains('replace-image-btn')) {
                    e.preventDefault();
                    const imagePath = e.target.getAttribute('data-image-path');
                    const imageName = e.target.getAttribute('data-image-name');
                    console.log(`üîÑ Clicou em substituir imagem: ${imagePath}`);
                    openImageModal(imagePath, imageName);
                }
            });
            
            // Contar bot√µes encontrados
            const editContentBtns = document.querySelectorAll('.edit-content-btn');
            const replaceImageBtns = document.querySelectorAll('.replace-image-btn');
            
            console.log(`üìù Encontrados ${editContentBtns.length} bot√µes de editar conte√∫do`);
            console.log(`üîÑ Encontrados ${replaceImageBtns.length} bot√µes de substituir imagem`);
        }

        // Fun√ß√µes para modais
        function openImageModal(imagePath, imageName) {
            const modal = document.getElementById('imageModal');
            const nameField = document.getElementById('modalImageName');
            const descriptionField = document.getElementById('modalImageDescription');
            
            if (nameField) nameField.value = imageName;
            if (descriptionField) descriptionField.value = `Imagem substitu√≠da: ${imageName}`;
            
            // Armazenar dados para substitui√ß√£o
            window.currentReplacingImage = imagePath;
            window.currentReplacingName = imageName;
            
            modal.style.display = 'flex';
        }
        
        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.getElementById('imageModalForm').reset();
            document.getElementById('modalImagePreview').style.display = 'none';
            window.currentReplacingImage = null;
            window.currentReplacingName = null;
        }
        
        function openContentModal(section) {
            const modal = document.getElementById('contentModal');
            
            // Carregar dados da se√ß√£o
            const currentContent = {
                'hero': {
                    title: 'O ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla',
                    text: 'Desde de 2019 entregando experi√™ncias √∫nicas',
                    image: 'imagens/profile_parrocknparrilla.webp'
                },
                'about': {
                    title: 'Sobre o Parrock',
                    text: 'Desde 2019, o Parrock Rock\'n Parrilla tem sido o ponto de encontro dos apaixonados por rock e da cultura da carne na parrilla em Campo Grande/MS. Com uma atmosfera √∫nica, oferecemos uma experi√™ncia completa para eventos sociais e corporativos, anivers√°rios, coquet√©is, casamentos, confraterniza√ß√µes e muito mais.\n\nVenha se juntar a n√≥s e aproveite momentos memor√°veis no Parrock Rock\'n Parrilla!',
                    image: 'imagens/Area-externo-parrock.webp'
                },
                'services': {
                    title: 'Nossos Servi√ßos',
                    text: 'Experi√™ncias completas para todas as ocasi√µes:\n\n‚Ä¢ Eventos Corporativos - Espa√ßo ideal para reuni√µes, treinamentos e confraterniza√ß√µes empresariais\n‚Ä¢ Anivers√°rios - Celebre em um ambiente especial com m√∫sica rock e gastronomia de qualidade\n‚Ä¢ Coquet√©is - Eventos sociais elegantes com drinks especiais e ambiente sofisticado\n‚Ä¢ Casamentos - Celebre o dia mais especial da sua vida em um ambiente √∫nico\n‚Ä¢ Confraterniza√ß√µes - Re√∫na amigos e familiares para momentos especiais\n‚Ä¢ Experi√™ncia Gastron√¥mica - Desfrute da aut√™ntica cultura da parrilla com carnes selecionadas',
                    image: null
                },
                'contact': {
                    title: 'Entre em Contato',
                    text: 'Reserve sua mesa ou solicite um or√ßamento',
                    image: null,
                    contactData: {
                        address: 'Rua Euclides da Cunha, 423\nCentro, Campo Grande/MS',
                        phone: '(67) 99999-9999',
                        email: 'contato@parrock.com.br'
                    }
                }
            };
            
            // Mesclar com conte√∫do personalizado se existir
            const customContent = JSON.parse(localStorage.getItem('siteContent') || '[]');
            const customItem = customContent.find(item => item.section === section);
            
            let contentToEdit = currentContent[section];
            if (customItem) {
                contentToEdit = {
                    ...contentToEdit,
                    title: customItem.title || contentToEdit.title,
                    text: customItem.text || contentToEdit.text,
                    image: customItem.image || contentToEdit.image,
                    contactData: customItem.contactData || contentToEdit.contactData
                };
            }
            
            // Preencher modal
            document.getElementById('modalContentSection').value = section;
            document.getElementById('modalContentTitle').value = contentToEdit.title;
            document.getElementById('modalContentText').value = contentToEdit.text;
            
            // Mostrar campos de contato se necess√°rio
            const contactFields = document.getElementById('modalContactFields');
            if (section === 'contact' && contentToEdit.contactData) {
                contactFields.style.display = 'block';
                document.getElementById('modalContactAddress').value = contentToEdit.contactData.address;
                document.getElementById('modalContactPhone').value = contentToEdit.contactData.phone;
                document.getElementById('modalContactEmail').value = contentToEdit.contactData.email;
            } else {
                contactFields.style.display = 'none';
            }
            
            // Armazenar se√ß√£o atual
            window.currentEditingSection = section;
            
            modal.style.display = 'flex';
        }
        
        function closeContentModal() {
            document.getElementById('contentModal').style.display = 'none';
            document.getElementById('contentModalForm').reset();
            document.getElementById('modalContentImagePreview').style.display = 'none';
            document.getElementById('modalContactFields').style.display = 'none';
            window.currentEditingSection = null;
        }
        
        // Fun√ß√µes para processar submits dos modais
        function handleImageModalSubmit() {
            const name = document.getElementById('modalImageName').value;
            const description = document.getElementById('modalImageDescription').value;
            const imageFile = document.getElementById('modalImageFile').files[0];

            if (!imageFile) {
                alert('Por favor, escolha uma nova imagem.');
                return;
            }
            
            // Determinar categoria automaticamente baseada no nome
            let category = 'gallery'; // padr√£o
            if (name.toLowerCase().includes('profile') || name.toLowerCase().includes('logo')) {
                category = 'logo';
            } else if (name.toLowerCase().includes('hero') || name.toLowerCase().includes('banner')) {
                category = 'hero';
            } else if (name.toLowerCase().includes('about') || name.toLowerCase().includes('sobre')) {
                category = 'about';
            } else if (name.toLowerCase().includes('services') || name.toLowerCase().includes('servi√ßos')) {
                category = 'services';
            } else if (name.toLowerCase().includes('contact') || name.toLowerCase().includes('contato')) {
                category = 'contact';
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const image = {
                    name,
                    category,
                    description,
                    data: e.target.result
                };
                
                // Verificar se est√° no modo de substitui√ß√£o
                if (window.currentReplacingImage) {
                    console.log(`üîÑ Modo de substitui√ß√£o ativo para: ${window.currentReplacingImage}`);
                    image.isReplacement = true;
                    image.originalPath = window.currentReplacingImage;
                }
                
                // Usar a fun√ß√£o saveImage do script.js
                if (typeof adminManager !== 'undefined' && adminManager.saveImage) {
                    adminManager.saveImage(image);
                } else {
                    // Fallback se adminManager n√£o estiver dispon√≠vel
                    saveImageDirectly(image);
                }
                
                closeImageModal();
                updateAllPreviews();
            };
            reader.readAsDataURL(imageFile);
        }
        
        function handleContentModalSubmit() {
            const section = window.currentEditingSection;
            const title = document.getElementById('modalContentTitle').value;
            const text = document.getElementById('modalContentText').value;
            const imageFile = document.getElementById('modalContentImage').files[0];
            
            if (!section || !title || !text) {
                alert('Por favor, preencha todos os campos obrigat√≥rios.');
                return;
            }
            
            const content = {
                section,
                title,
                text
            };
            
            // Processar imagem se fornecida
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    content.image = e.target.result;
                    processContentSubmit(content);
                };
                reader.readAsDataURL(imageFile);
            } else {
                processContentSubmit(content);
            }
        }
        
        function processContentSubmit(content) {
            // Se for se√ß√£o de contato, processar dados espec√≠ficos
            if (content.section === 'contact') {
                const contactData = {
                    address: document.getElementById('modalContactAddress').value,
                    phone: document.getElementById('modalContactPhone').value,
                    email: document.getElementById('modalContactEmail').value
                };
                content.contactData = contactData;
            }
            
            // Usar a fun√ß√£o saveContent do script.js
            if (typeof adminManager !== 'undefined' && adminManager.saveContent) {
                adminManager.saveContent(content);
            } else {
                // Fallback se adminManager n√£o estiver dispon√≠vel
                saveContentDirectly(content);
            }
            
            closeContentModal();
            updateAllPreviews();
        }
        
        // Fun√ß√µes fallback para salvar diretamente
        function saveImageDirectly(image) {
            const images = JSON.parse(localStorage.getItem('images') || '[]');
            
            if (image.isReplacement && image.originalPath) {
                const originalIndex = images.findIndex(img => 
                    img.name === image.name || 
                    img.path === image.originalPath ||
                    img.data === image.originalPath
                );
                
                if (originalIndex !== -1) {
                    image.id = images[originalIndex].id;
                    images[originalIndex] = image;
                    showSuccess('Imagem substitu√≠da com sucesso!');
                } else {
                    if (!image.id) {
                        image.id = 'img_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    }
                    images.push(image);
                    showSuccess('Imagem adicionada com sucesso!');
                }
            } else {
                if (!image.id) {
                    image.id = 'img_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                }
                images.push(image);
                showSuccess('Imagem adicionada com sucesso!');
            }
            
            localStorage.setItem('images', JSON.stringify(images));
        }
        
        function saveContentDirectly(content) {
            const contents = JSON.parse(localStorage.getItem('siteContent') || '[]');
            const existingIndex = contents.findIndex(item => item.section === content.section);
            
            if (existingIndex !== -1) {
                contents[existingIndex] = content;
                showSuccess('Conte√∫do atualizado com sucesso!');
            } else {
                contents.push(content);
                showSuccess('Conte√∫do salvo com sucesso!');
            }
            
            localStorage.setItem('siteContent', JSON.stringify(contents));
            
            // For√ßar atualiza√ß√£o do site principal
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'siteContent',
                newValue: JSON.stringify(contents)
            }));
        }

        // Fun√ß√µes auxiliares
        function switchToForm(tabName) {
            console.log(`üîÑ Executando switchToForm para: ${tabName}`);
            
            if (tabName === 'images') {
                showImageForm();
            } else if (tabName === 'content') {
                showContentForm();
            }
            
            // Remove active de todos os itens
            document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Adiciona active no item da aba
            const navItem = document.querySelector(`[data-tab="${tabName}"]`);
            const tabContent = document.getElementById(tabName);
            
            if (navItem && tabContent) {
                navItem.classList.add('active');
                tabContent.classList.add('active');
                
                // Muda para o formul√°rio se houver toggle
                const toggleBtns = tabContent.querySelectorAll('.toggle-btn');
                const formSection = tabContent.querySelector('.form-section');
                const previewSection = tabContent.querySelector('.preview-section');
                
                if (toggleBtns.length > 0 && formSection && previewSection) {
                    toggleBtns.forEach(b => b.classList.remove('active'));
                    toggleBtns[0].classList.add('active'); // Primeiro bot√£o (formul√°rio)
                    formSection.style.display = 'block';
                    previewSection.style.display = 'none';
                }
            }
        }

        function showSuccess(message) {
            console.log(`‚úÖ Mostrando notifica√ß√£o: ${message}`);
            // Criar elemento de notifica√ß√£o
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                font-weight: 500;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            // Adicionar anima√ß√£o CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // Remover ap√≥s 3 segundos
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Carregar dados ao inicializar
        document.addEventListener('DOMContentLoaded', () => {
            loadExistingData();
            updateAllPreviews();
            // Aguardar um pouco para garantir que os elementos foram criados
            setTimeout(() => {
                bindPreviewButtons();
            }, 100);
            
            // Event listeners para modais
            const imageModalForm = document.getElementById('imageModalForm');
            if (imageModalForm) {
                imageModalForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    handleImageModalSubmit();
                });
            }
            
            const contentModalForm = document.getElementById('contentModalForm');
            if (contentModalForm) {
                contentModalForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    handleContentModalSubmit();
                });
            }
            
            // Preview de imagem no modal de substituir
            const modalImageFile = document.getElementById('modalImageFile');
            if (modalImageFile) {
                modalImageFile.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.getElementById('modalImagePreview').src = e.target.result;
                            document.getElementById('modalImagePreview').style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Preview de imagem no modal de conte√∫do
            const modalContentImage = document.getElementById('modalContentImage');
            if (modalContentImage) {
                modalContentImage.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.getElementById('modalContentImagePreview').src = e.target.result;
                            document.getElementById('modalContentImagePreview').style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Preview de logo nas configura√ß√µes
            const siteLogo = document.getElementById('siteLogo');
            if (siteLogo) {
                siteLogo.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.getElementById('siteLogoPreview').src = e.target.result;
                            document.getElementById('siteLogoPreview').style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Preview de imagem nos shows - removido pois j√° √© configurado pelo setupImagePreview
            
            // Preview de imagem no card√°pio
            const menuImage = document.getElementById('menuImage');
            if (menuImage) {
                menuImage.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.getElementById('menuImagePreview').src = e.target.result;
                            document.getElementById('menuImagePreview').style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Preview de imagem nas promo√ß√µes
            const promotionImage = document.getElementById('promotionImage');
            if (promotionImage) {
                promotionImage.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.getElementById('promotionImagePreview').src = e.target.result;
                            document.getElementById('promotionImagePreview').style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        });

        // Fun√ß√µes para editar e excluir shows
        function editShow(showId) {
            const shows = JSON.parse(localStorage.getItem('shows') || '[]');
            const show = shows.find(s => (s.id || s.title) === showId);
            
            if (!show) {
                alert('Show n√£o encontrado!');
                return;
            }
            
            // Preencher o formul√°rio com os dados do show
            document.getElementById('showTitle').value = show.title || '';
            document.getElementById('showDate').value = show.date || '';
            document.getElementById('showTime').value = show.time || '';
            document.getElementById('showDescription').value = show.description || '';
            document.getElementById('showFeatured').checked = show.featured || false;
            
            // Se tiver imagem, mostrar preview
            if (show.image) {
                document.getElementById('showImagePreview').src = show.image;
                document.getElementById('showImagePreview').style.display = 'block';
            }
            
            // Armazenar ID do show sendo editado
            window.editingShowId = showId;
            
            // Mostrar mensagem
            alert('Show carregado para edi√ß√£o. Modifique os campos e clique em "Adicionar Show" para salvar as altera√ß√µes.');
        }
        
        // Vari√°veis globais para o modal de confirma√ß√£o
        let pendingDeleteAction = null;
        let pendingDeleteItem = null;

        function deleteShow(showId) {
            const shows = JSON.parse(localStorage.getItem('shows') || '[]');
            const show = shows.find(s => (s.id || s.title) === showId);
            
            if (!show) {
                alert('Show n√£o encontrado!');
                return;
            }
            
            // Configurar a√ß√£o de exclus√£o
            pendingDeleteAction = () => {
                const filteredShows = shows.filter(s => (s.id || s.title) !== showId);
                localStorage.setItem('shows', JSON.stringify(filteredShows));
                
                // Atualizar preview
                updateShowsPreview();
                updateStats();
                
                alert('Show exclu√≠do com sucesso!');
            };
            
            pendingDeleteItem = show.title;
            
            // Mostrar modal de confirma√ß√£o
            showConfirmModal(`Tem certeza que deseja excluir o show "${show.title}"?`);
        }
        

        // Fun√ß√µes do modal de confirma√ß√£o
        function showConfirmModal(message) {
            document.getElementById('confirmMessage').textContent = message;
            document.getElementById('confirmModal').style.display = 'flex';
        }

        function closeConfirmModal() {
            document.getElementById('confirmModal').style.display = 'none';
            pendingDeleteAction = null;
            pendingDeleteItem = null;
        }

        function executeDelete() {
            if (pendingDeleteAction) {
                pendingDeleteAction();
                closeConfirmModal();
            }
        }

        // Fechar modal ao clicar fora dele
        document.getElementById('confirmModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeConfirmModal();
            }
        });

        // Ajustar campos de data para UTC-4
        document.addEventListener('DOMContentLoaded', function() {
            const dateInputs = document.querySelectorAll('input[type="date"]');
            
            dateInputs.forEach(input => {
                // Definir o fuso hor√°rio para UTC-4
                input.addEventListener('change', function() {
                    if (this.value) {
                        const date = new Date(this.value + 'T00:00:00');
                        const utc4Date = new Date(date.getTime() - (4 * 60 * 60 * 1000));
                        this.value = utc4Date.toISOString().split('T')[0];
                    }
                });
            });
        });
    </script>
</body>
</html>
